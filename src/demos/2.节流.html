<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>节流</title>
        <script src="./js/lodash.js"></script>
    </head>
    <body>
        <div>
            <h1>我是计数器 <span>0</span></h1>
            <button>点击加1</button>
        </div>
        <script>
            // 节流: 在规定的时间间隔内不会重复触发回调, 只有大于这个时间之后才会触发回调, 把频繁触发变为少量触发
            // 获取节点
            let span = document.querySelector("span");
            let btn = document.querySelector("button");
            let count = 0;
            // 计数器在1秒内数字只能加上1
            btn.onclick = _.throttle(function () {
                // 目前这个回调函数1s执行一次
                // 假如这里有很多业务代码, 就可以给浏览器充足的时间去解析
                count++;
                span.textContent = count;
                console.log("执行");
            }, 1000);

            /**
             *  _.throttle(func, wait, options)
             *      参数:
             *          func 需要节流的函数
             *          wait 需要节流的时间(毫秒)
             *          options 配置选项
             *      返回新的 debounced（防抖动）函数
             */

            // 防抖: 用户操作很频繁, 但是只执行一次
            // 节流: 用户操作很频繁, 但是把频繁的操作变为少量操作(可以给浏览器充足的时间去解析代码)
            // 节流: 闭包 + 延迟器
        </script>
    </body>
</html>
